<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- SIGN UP -->
    <input type="text" id="name" placeholder="Your Name">
    <input type="text" id="class" placeholder="Class">
    <input type="email" id="signup-email" placeholder="Email">
    <input type="password" id="signup-password" placeholder="Password">

    <button onclick="signup()">Sign Up</button>


    <hr>

    <!-- LOGIN -->
    <input type="email" id="login-email" placeholder="Email">
    <input type="password" id="login-password" placeholder="Password">
    <button onclick="login()">Login</button>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCFsSOk-HfD6pwZXO5XEW6YKJG1ipA5XnQ",
            authDomain: "kartik-book-publication.firebaseapp.com",
            projectId: "kartik-book-publication",
            appId: "1:354471030726:web:09a2b8bebf367b35b20cc7",
            storageBucket: "kartik-book-publication.appspot.com",
            messagingSenderId: "354471030726",
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        window.signup = function () {
            const name = document.getElementById("name").value;
            const userClass = document.getElementById("class").value;
            const email = document.getElementById("signup-email").value;
            const password = document.getElementById("signup-password").value;

            createUserWithEmailAndPassword(auth, email, password)
                .then(async (userCredential) => {
                    const uid = userCredential.user.uid;

                    await setDoc(doc(db, "users", uid), {
                        name: name,
                        class: userClass,
                        email: email
                    });

                    alert("Signup successful ðŸŽ‰");
                    window.location.href = "index.html";
                })
                .catch(err => alert(err.message));
        };

        window.login = function () {
            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;

            signInWithEmailAndPassword(auth, email, password)
                .then(() => {
                    alert("Login successful âœ…");
                    window.location.href = "index.html";
                })
                .catch(err => alert(err.message));
        };
    </script>



</body>

</html>
